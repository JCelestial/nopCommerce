@model Nop.Plugin.MultiFactorAuth.GoogleAuthenticator.Models.AuthModel

<div class="google-authenticator-conteiner">
    
    <div class="qr-code-conteiner">
        <div class="instruction">
            @Html.Raw(T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.Instruction"))
        </div>
        <div class="qr-code-image">
            <img src="@(Model.QrCodeImageUrl)" />
        </div>
    </div>
    <div class="manual-code-setup">
        <div class="instruction">
            @Html.Raw(T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.InstructionManual"))
        </div>
        <div class="account-info">
            <span>@T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.Account") @(Model.Account)</span>
            <span>@T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.Key") @(Model.ManualEntryQrCode)</span>
            <span>@T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.TypeKey")</span>
        </div>
    </div>

    <form asp-controller="Authentication" asp-action="RegisterGoogleAuthenticator" method="post">
        <div>
            <input asp-for="SecretKey" type="hidden" />
        </div>
        <div class="panel-body">
            
            <div class="inputs">
                <label asp-for="Code" asp-postfix=":"></label>
                <input asp-for="Code" />
                <span asp-validation-for="Code"></span>
            </div>
            
            <div class="form-group">
                <div class="col-md-9 col-md-offset-3">
                    @*<button type="button" id="googleAuthSendCode" class="btn bg-navy">
                        @T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.SendCode")
                    </button>*@
                    <div class="buttons">
                        <input type="submit" value="@T("Plugins.MultiFactorAuth.GoogleAuthenticator.Customer.SendCode")" name="save-info-button" class="button-1 save-customer-info-button" />
                    </div>
                </div>               

                @*<script asp-location="Footer" type="text/javascript">
                    $(document).ready(function () {
                        $('#googleAuthSendCode').click(function () {
                            var postData = {
                                verifyToken: '@Model.Code',
                                code: '@Model.SecretKey'
                            };
                            addAntiForgeryToken(postData);
                            $.ajax({
                                cache: false,
                                type: "POST",
                                url: "@(Url.Action("RegisterGoogleAuthenticator", "Authentication"))",
                                data: postData,
                                success: function (data) {
                                    location.reload();
                                },
                                error: function (jqXHR, textStatus, errorThrown) {
                                    alert('Failed to register in GoogleAuthenticator.');
                                }
                            });
                        });
                    });
                </script>*@
            </div>
        </div>
    </form>
</div>
